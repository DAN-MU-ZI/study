<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 400">
  <defs>
    <style>
      .client { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .middleware { fill: #fff8e1; stroke: #f9a825; stroke-width: 2; }
      .server { fill: #e8f5e9; stroke: #388e3c; stroke-width: 2; }
      .redis { fill: #fce4ec; stroke: #c2185b; stroke-width: 2; }
      .text { font-family: 'Segoe UI', Arial, sans-serif; font-size: 14px; fill: #333; }
      .title { font-family: 'Segoe UI', Arial, sans-serif; font-size: 12px; fill: #666; }
      .arrow { stroke: #555; stroke-width: 2; fill: none; }
      .arrow-head { fill: #555; }
      .dashed { stroke-dasharray: 5,5; }
      .label { font-family: 'Segoe UI', Arial, sans-serif; font-size: 11px; fill: #666; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow-head"/>
    </marker>
  </defs>
  
  <!-- Client Box -->
  <rect x="240" y="20" width="120" height="60" rx="8" class="client"/>
  <text x="300" y="45" text-anchor="middle" class="title">Client</text>
  <text x="300" y="65" text-anchor="middle" class="text">User Request</text>
  
  <!-- Rate Limiter (Hexagon) -->
  <polygon points="300,120 360,150 360,190 300,220 240,190 240,150" class="middleware"/>
  <text x="300" y="165" text-anchor="middle" class="title">Rate Limit Middleware</text>
  <text x="300" y="185" text-anchor="middle" class="text">Rate Limiter</text>
  
  <!-- API Server Box -->
  <rect x="240" y="260" width="120" height="60" rx="8" class="server"/>
  <text x="300" y="285" text-anchor="middle" class="title">API Server</text>
  <text x="300" y="305" text-anchor="middle" class="text">API Server</text>
  
  <!-- Redis Box -->
  <rect x="440" y="140" width="120" height="70" rx="8" class="redis"/>
  <text x="500" y="165" text-anchor="middle" class="title">Redis</text>
  <text x="500" y="190" text-anchor="middle" class="text">Redis ZSET</text>
  
  <!-- Arrows -->
  <!-- Client to Rate Limiter -->
  <line x1="300" y1="80" x2="300" y2="118" class="arrow" marker-end="url(#arrowhead)"/>
  
  <!-- Rate Limiter to API Server (Allow) -->
  <line x1="300" y1="220" x2="300" y2="258" class="arrow" marker-end="url(#arrowhead)"/>
  <text x="320" y="245" class="label">Allow</text>
  
  <!-- Rate Limiter to Redis (dashed) -->
  <line x1="360" y1="170" x2="438" y2="175" class="arrow dashed" marker-end="url(#arrowhead)"/>
  <text x="390" y="160" class="label">Check/Update</text>
  
  <!-- Rate Limiter back to Client (429 Reject) -->
  <path d="M 240,150 Q 180,100 240,55" class="arrow" marker-end="url(#arrowhead)"/>
  <text x="160" y="100" class="label">429 Reject</text>
</svg>
